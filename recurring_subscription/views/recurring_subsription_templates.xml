<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="subscription_data" name="Subscription Details">
        <t t-call="portal.portal_layout">
            <div>
                <h2>
                    <center>
                        <span>Subscriptions</span>
                    </center>
                </h2>
            </div>
            <table class="table table-striped">
                <thead style="font-size:23px">
                    <tr>
                        <th>Subscription</th>
                        <th>Customer</th>
                        <th>Product</th>
                        <th>Due Date</th>
                        <th>Amount</th>
                        <th>State</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="record" t-as="rec">
                        <tr>
                            <td>
                                <span t-field="rec.order"/>
                            </td>
                            <td>
                                <span t-field="rec.partner_id"/>
                            </td>
                            <td>
                                <span t-field="rec.product_id"/>
                            </td>
                            <td>
                                <span t-field="rec.due_date"/>
                            </td>
                            <td>
                                <span t-field="rec.recurring_amount"/>
                            </td>
                            <td>
                                <span t-field="rec.state"/>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>

            <a href="/rec-subscription/new">
                <button class="btn-primary form-control">Create</button>
            </a>
        </t>
    </template>
    <template id="subscription_form" name="Subscription Form">
        <t t-call="website.layout">
            <t t-set="partner"
               t-value="request.env['website.visitor']._get_visitor_from_request().partner_id"/>
            <t t-set="products"
               t-value="request.env['product.product'].sudo().search([])"/>
            <div class="container">
                <form action="/rec-subscription/create" method="post">
                    <br/>
                    <div class="form-group">
                        <input name="partner_id" class="form-control"
                               type="text" placeholder="Name"
                               t-att-value="partner.id"/>
                    </div>
                    <br/>
                    <div class="form-group">
                        <select name="product_id" class="form-control">
                            <t t-foreach="products" t-as="product">
                                <option t-att-value="product.id"
                                        t-esc="product.name"
                                        t-att-data-price="product.list_price"/>
                            </t>
                        </select>
                    </div>
                    <br/>
                    <!--                    <div class="form-group">-->
                    <!--                        <input type="text" class="form-control" name="price" data-fill-with="price"/>-->
                    <!--                    </div>-->
                    <br/>
                    <div class="form-group">
                        <button class="form-control btn btn-primary"
                                type="submit">Create
                        </button>
                    </div>
                </form>
            </div>
        </t>
    </template>
<!--    <template id="menu_subscription" inherit_id="website.layout">-->
<!--        <xpath expr="//div[@id='o_main_nav']" position="inside">-->
<!--            <ul>-->
<!--                <li class="dropdown">-->
<!--                    <a class="dropdown-toggle btn" data-bs-toggle="dropdown" href="#">Subscriptions</a>-->
<!--                    <ul class="dropdown">-->
<!--                        <li>-->
<!--                            <a href="/rec-subscription">Subscription</a>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <a href="/rec-subscription/credit">Credit</a>-->
<!--                        </li>-->
<!--                    </ul>-->
<!--                </li>-->
<!--            </ul>-->
<!--        </xpath>-->
<!--    </template>-->
        <record id="menu_subscription" model="website.menu">
            <field name="name">Subscription</field>
            <field name="url"/>
            <field name="parent_id" search="[('parent_id','=',False),('website_id','=', 1)]"/>
    <!--        <field name="parent_id" ref="website.main_menu"/>-->
        </record>
        <record id="rec_subscription" model="website.menu">
            <field name="name">Subscription</field>
            <field name="url">/rec-subscription</field>
            <field name="parent_id" ref="recurring_subscription.menu_subscription"/>
        </record>
        <record id="rec_subscription_credit" model="website.menu">
            <field name="name">Credits</field>
            <field name="url">/rec-subscription/credit</field>
            <field name="parent_id" ref="recurring_subscription.menu_subscription"/>
        </record>
</odoo>